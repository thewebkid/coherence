// Dark mode styles
// Supports both manual toggle (data-theme) and system preference

// System preference dark mode (when no manual override)
@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --bg: #1a1a1e;
    --bg-secondary: #242428;
    --text: #e8e4df;
    --text-muted: #9a9590;
    --accent: #8da0b3;
    --accent-hover: #a3b5c6;
    --border: #333338;
    --nav-bg: rgba(26, 26, 30, 0.92);
  }
}

// ============================================
// BASE ELEMENT STYLES - use CSS variables
// ============================================

html,
body {
  background-color: var(--bg);
  color: var(--text);
}

body {
  transition: background-color 0.2s ease, color 0.2s ease;
}

#app,
.site-wrapper,
.site-main {
  background-color: var(--bg);
  color: var(--text);
}

// Page wrappers should all have the main bg color
.home-page,
.orientation-page,
.glossary-page,
.engine-page,
.work-page,
.manuscript-page,
.deck-page,
.handbook-page,
.practice-page,
.contact-page,
.civ-orientation-page {
  background-color: var(--bg);
  color: var(--text);
}

// These elements should be transparent
main,
article,
section,
aside,
header,
nav {
  background-color: transparent;
}

// Mobile nav panel needs a solid background (uses aside, not nav)
aside.nav-mobile,
nav.nav-mobile {
  background-color: var(--bg) !important;
}

// Form elements
input,
textarea,
select {
  background-color: var(--bg-secondary);
  color: var(--text);
  border-color: var(--border);
}

button {
  color: inherit;
}

// Invert diagrams in dark mode for visibility
[data-theme='dark'] img.diagram {
  filter: invert(0.88) hue-rotate(180deg);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) img.diagram {
    filter: invert(0.88) hue-rotate(180deg);
  }
}

// Integrative field diagram — invert black lines/text to white in dark mode
[data-theme='dark'] img[src*='integrative-diagram'] {
  filter: invert(1);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) img[src*='integrative-diagram'] {
    filter: invert(1);
  }
}

// CAS diagram — soften the high-contrast white circles in dark mode
[data-theme='dark'] img[src*='cas-diagram'] {
  filter: brightness(0.88) contrast(0.95);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) img[src*='cas-diagram'] {
    filter: brightness(0.88) contrast(0.95);
  }
}

// Selection colors
::selection {
  background: var(--accent);
  color: var(--bg);
}

// Scrollbar styling (subtle)
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 4px;

  &:hover {
    background: var(--text-muted);
  }
}
